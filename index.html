<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="container" style="height: 90vh"></div>

    <script type="module">
      import { monaco } from "https://cdn.jsdelivr.net/npm/@live-codes/monaco-editor/monaco.js";
      import rippleSupport from "./dist/index.js";

      const lang = "ripple";
      monaco.languages.register({ id: lang });
      monaco.languages.setLanguageConfiguration(lang, rippleSupport.config);
      monaco.languages.setMonarchTokensProvider(lang, rippleSupport.tokens);
      monaco.languages.registerDefinitionProvider(
        lang,
        rippleSupport.definitions,
      );
      rippleSupport.init(monaco);

      const code = `
import { track } from "ripple";

export component Counter() {
  let count = track(0);
  let double = track(() => @count * 2);

  <div class="container">
    <h2>{"Counter"}</h2>
    <p>{\`Count: \${@count}\`}</p>
    <p>{\`Double: \${@double}\`}</p>

    <button onClick={() => @count--}>{"-"}</button>
    <button onClick={() => @count++}>{"+"}</button>
    if (@count !== 0) {
      <div>
        <button onClick={() => (@count = 0)}>{"Reset"}</button>
      </div>
    }
  </div>

  <style>
    .container {
      text-align: center;
    }

    button {
      font-family: "Courier New", monospace;
      font-size: 1em;
      margin: 6px;
      padding: 6px 12px;
      border: none;
      cursor: pointer;
    }

    button/* Unknown: PseudoClassSelector */ {
      background-color: #e0e0e0;
    }
  </style>
}
`.trimStart();

      const editor = monaco.editor.create(
        document.getElementById("container"),
        {
          value: code,
          language: lang,
          automaticLayout: true,
          theme: "vs-dark",
        },
      );
    </script>
  </body>
</html>
